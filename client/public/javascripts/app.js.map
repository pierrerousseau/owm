{"version":3,"file":"public/javascripts/app.js","sources":["app/collections/city_collection.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/view_collection.coffee","app/models/city.coffee","app/routers/app_router.coffee","app/views/app_view.coffee","app/views/cities_view.coffee","app/views/city_view.coffee","app/views/templates/city.jade","app/views/templates/home.jade","app/views/widget_view.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzGA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxHA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxGA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1DA;;A","sourcesContent":["var City, CityCollection,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nCity = require('../models/city');\n\nmodule.exports = CityCollection = (function(superClass) {\n  extend(CityCollection, superClass);\n\n  CityCollection.prototype.model = City;\n\n  CityCollection.prototype.url = 'cities';\n\n  function CityCollection(view) {\n    this.view = view;\n    CityCollection.__super__.constructor.apply(this, arguments);\n  }\n\n  return CityCollection;\n\n})(Backbone.Collection);\n","if (this.PiourCozyOWM == null) {\n  this.PiourCozyOWM = {};\n}\n\nif (PiourCozyOWM.Routers == null) {\n  PiourCozyOWM.Routers = {};\n}\n\nif (PiourCozyOWM.Views == null) {\n  PiourCozyOWM.Views = {};\n}\n\nif (PiourCozyOWM.Models == null) {\n  PiourCozyOWM.Models = {};\n}\n\nif (PiourCozyOWM.Collections == null) {\n  PiourCozyOWM.Collections = {};\n}\n\n$(function() {\n  var AppView;\n  require('../lib/app_helpers');\n  if (window.location.href.match(\"widget.html\")) {\n    PiourCozyOWM.Views.appView = new (AppView = require('views/widget_view'));\n    PiourCozyOWM.Views.appView.render();\n  } else {\n    PiourCozyOWM.Views.appView = new (AppView = require('views/app_view'));\n    PiourCozyOWM.Views.appView.render();\n  }\n  return Backbone.history.start({\n    pushState: true\n  });\n});\n","(function() {\n  return (function() {\n    var console, dummy, method, methods, results;\n    console = window.console = window.console || {};\n    method = void 0;\n    dummy = function() {};\n    methods = 'assert,count,debug,dir,dirxml,error,exception, group,groupCollapsed,groupEnd,info,log,markTimeline, profile,profileEnd,time,timeEnd,trace,warn'.split(',');\n    results = [];\n    while (method = methods.pop()) {\n      results.push(console[method] = console[method] || dummy);\n    }\n    return results;\n  })();\n})();\n","var BaseView,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nmodule.exports = BaseView = (function(superClass) {\n  extend(BaseView, superClass);\n\n  function BaseView() {\n    return BaseView.__super__.constructor.apply(this, arguments);\n  }\n\n  BaseView.prototype.template = function() {};\n\n  BaseView.prototype.initialize = function() {};\n\n  BaseView.prototype.getRenderData = function() {\n    var ref;\n    return {\n      model: (ref = this.model) != null ? ref.toJSON() : void 0\n    };\n  };\n\n  BaseView.prototype.render = function() {\n    this.beforeRender();\n    this.$el.html(this.template(this.getRenderData()));\n    this.afterRender();\n    return this;\n  };\n\n  BaseView.prototype.beforeRender = function() {};\n\n  BaseView.prototype.afterRender = function() {};\n\n  BaseView.prototype.destroy = function() {\n    this.undelegateEvents();\n    this.$el.removeData().unbind();\n    this.remove();\n    return Backbone.View.prototype.remove.call(this);\n  };\n\n  return BaseView;\n\n})(Backbone.View);\n","var BaseView, ViewCollection,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nBaseView = require('lib/base_view');\n\nmodule.exports = ViewCollection = (function(superClass) {\n  extend(ViewCollection, superClass);\n\n  function ViewCollection() {\n    this.removeItem = bind(this.removeItem, this);\n    this.addItem = bind(this.addItem, this);\n    return ViewCollection.__super__.constructor.apply(this, arguments);\n  }\n\n  ViewCollection.prototype.itemview = null;\n\n  ViewCollection.prototype.views = {};\n\n  ViewCollection.prototype.template = function() {\n    return '';\n  };\n\n  ViewCollection.prototype.itemViewOptions = function() {};\n\n  ViewCollection.prototype.collectionEl = null;\n\n  ViewCollection.prototype.onChange = function() {\n    return this.$el.toggleClass('empty', _.size(this.views) === 0);\n  };\n\n  ViewCollection.prototype.appendView = function(view) {\n    return this.$collectionEl.prepend(view.el);\n  };\n\n  ViewCollection.prototype.initialize = function() {\n    ViewCollection.__super__.initialize.apply(this, arguments);\n    this.views = {};\n    this.listenTo(this.collection, \"reset\", this.onReset);\n    this.listenTo(this.collection, \"add\", this.addItem);\n    this.listenTo(this.collection, \"remove\", this.removeItem);\n    if (this.collectionEl == null) {\n      this.collectionEl = this.el;\n      return this.$collectionEl = $(this.collectionEl);\n    }\n  };\n\n  ViewCollection.prototype.render = function() {\n    var id, ref, view;\n    ref = this.views;\n    for (id in ref) {\n      view = ref[id];\n      view.$el.detach();\n    }\n    return ViewCollection.__super__.render.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.afterRender = function() {\n    var id, ref, view;\n    this.$collectionEl = $(this.collectionEl);\n    ref = this.views;\n    for (id in ref) {\n      view = ref[id];\n      this.appendView(view.$el);\n    }\n    this.onReset(this.collection);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.remove = function() {\n    this.onReset([]);\n    return ViewCollection.__super__.remove.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.onReset = function(newcollection) {\n    var id, ref, view;\n    ref = this.views;\n    for (id in ref) {\n      view = ref[id];\n      view.remove();\n    }\n    return newcollection.forEach(this.addItem);\n  };\n\n  ViewCollection.prototype.addItem = function(model) {\n    var options, view;\n    options = _.extend({}, {\n      model: model\n    }, this.itemViewOptions(model));\n    view = new this.itemview(options);\n    this.views[model.cid] = view.render();\n    this.appendView(view);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.removeItem = function(model) {\n    this.views[model.cid].remove();\n    delete this.views[model.cid];\n    return this.onChange(this.views);\n  };\n\n  return ViewCollection;\n\n})(BaseView);\n","var City,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nmodule.exports = City = (function(superClass) {\n  extend(City, superClass);\n\n  function City() {\n    this.fmtCityDaysForecastInfos = bind(this.fmtCityDaysForecastInfos, this);\n    this.fmtCityForecastInfos = bind(this.fmtCityForecastInfos, this);\n    this.fmtCityWeatherInfos = bind(this.fmtCityWeatherInfos, this);\n    return City.__super__.constructor.apply(this, arguments);\n  }\n\n  City.prototype.urlRoot = 'cities';\n\n  City.prototype.initialize = function() {\n    this.fmtCityWeatherInfos();\n    this.fmtCityForecastInfos();\n    return this.fmtCityDaysForecastInfos();\n  };\n\n  City.prototype.toRoundCelcius = function(value) {\n    return parseInt(value - 273.15);\n  };\n\n  City.prototype.fmtCityWeatherInfos = function() {\n    var clouds, main, main_weather, name, sys, toSet, weather;\n    toSet = {};\n    weather = this.get(\"weather\");\n    if (weather) {\n      main = weather.main;\n      if (main) {\n        toSet.temp = this.toRoundCelcius(main.temp);\n        toSet.humidity = main.humidity;\n      }\n      main_weather = weather.weather;\n      if (main_weather) {\n        toSet.weather = main_weather[0];\n      }\n      clouds = weather.clouds;\n      if (clouds) {\n        toSet.clouds = clouds.all;\n      }\n      sys = weather.sys;\n      if (sys) {\n        toSet.country = sys.country;\n      }\n      name = weather.name;\n      if (name) {\n        toSet.name = name;\n      }\n    }\n    return this.set(toSet);\n  };\n\n  City.prototype.toReadableHour = function(value) {\n    return value.split(\" \")[1].slice(0, 5);\n  };\n\n  City.prototype.toReadableDate = function(value) {\n    var date;\n    date = new Date(0);\n    date.setUTCSeconds(value);\n    return \"\" + date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear();\n  };\n\n  City.prototype.fmtCityForecastInfos = function() {\n    var forecast, hour, i, len, next5, nextHour, now;\n    next5 = [];\n    forecast = this.get(\"hours\");\n    if (forecast) {\n      forecast = forecast.list;\n      now = new Date().getTime();\n      if (forecast) {\n        for (i = 0, len = forecast.length; i < len; i++) {\n          hour = forecast[i];\n          if (hour.dt * 1000 >= now) {\n            nextHour = {};\n            nextHour.hour = this.toReadableHour(hour.dt_txt);\n            nextHour.temp = this.toRoundCelcius(hour.main.temp);\n            nextHour.humidity = hour.main.humidity;\n            nextHour.weather = hour.weather[0];\n            next5.push(nextHour);\n          }\n          if (next5.length >= 5) {\n            break;\n          }\n        }\n      }\n    }\n    return this.set(\"hours\", next5);\n  };\n\n  City.prototype.fmtCityDaysForecastInfos = function() {\n    var day, forecast, i, len, next5, nextDay;\n    next5 = [];\n    forecast = this.get(\"days\");\n    if (forecast) {\n      forecast = forecast.list;\n      if (forecast) {\n        for (i = 0, len = forecast.length; i < len; i++) {\n          day = forecast[i];\n          nextDay = {};\n          nextDay.date = this.toReadableDate(day.dt);\n          nextDay.day = this.toRoundCelcius(day.temp.day);\n          nextDay.night = this.toRoundCelcius(day.temp.night);\n          nextDay.humidity = day.humidity;\n          nextDay.weather = day.weather[0];\n          next5.push(nextDay);\n        }\n      }\n    }\n    return this.set(\"days\", next5);\n  };\n\n  return City;\n\n})(Backbone.Model);\n","var AppRouter,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nmodule.exports = AppRouter = (function(superClass) {\n  extend(AppRouter, superClass);\n\n  function AppRouter() {\n    return AppRouter.__super__.constructor.apply(this, arguments);\n  }\n\n  AppRouter.prototype.routes = {\n    '': function() {}\n  };\n\n  return AppRouter;\n\n})(Backbone.Router);\n","var AppRouter, AppView, CitiesView, City, CityCollection, View,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nView = require(\"../lib/base_view\");\n\nAppRouter = require(\"../routers/app_router\");\n\nCitiesView = require(\"./cities_view\");\n\nCity = require(\"../models/city\");\n\nCityCollection = require('../collections/city_collection');\n\nmodule.exports = AppView = (function(superClass) {\n  extend(AppView, superClass);\n\n  function AppView() {\n    return AppView.__super__.constructor.apply(this, arguments);\n  }\n\n  AppView.prototype.el = \"body.application\";\n\n  AppView.prototype.template = function() {\n    return require(\"./templates/home\");\n  };\n\n  AppView.prototype.initialize = function() {\n    return this.router = PiourCozyOWM.Routers.AppRouter = new AppRouter();\n  };\n\n  AppView.prototype.afterRender = function() {\n    this.citiesView = new CitiesView({\n      collection: new CityCollection\n    });\n    this.setLoading();\n    return this.citiesView.collection.fetch({\n      success: (function(_this) {\n        return function() {\n          return _this.unSetLoading();\n        };\n      })(this),\n      error: (function(_this) {\n        return function() {\n          _this.unSetLoading();\n          return alertUser(\"impossible to retrieve weather informations\");\n        };\n      })(this)\n    });\n  };\n\n  AppView.prototype.events = {\n    \"submit #search\": \"cityFind\",\n    \"submit #refresh\": \"refresh\"\n  };\n\n  AppView.prototype.cityFind = function(evt) {\n    var city, cityObj;\n    city = this.$el.find(\"input.city\");\n    cityObj = {\n      \"name\": city.val()\n    };\n    this.citiesView.collection.create(cityObj, {\n      error: (function(_this) {\n        return function() {\n          return alertUser(\"impossible to add weather informations for \" + city.val());\n        };\n      })(this)\n    });\n    return false;\n  };\n\n  AppView.prototype.refresh = function(evt) {\n    this.setLoading();\n    this.citiesView.collection.fetch({\n      reset: true,\n      success: (function(_this) {\n        return function() {\n          return _this.unSetLoading();\n        };\n      })(this),\n      error: (function(_this) {\n        return function() {\n          _this.unSetLoading();\n          return alertUser(\"impossible to retrieve weather informations\");\n        };\n      })(this)\n    });\n    return false;\n  };\n\n  AppView.prototype.setLoading = function() {\n    this.$el.find(\"button\").toggleClass(\"btn-default\");\n    return this.$el.find(\"button\").toggleClass(\"btn-warning\");\n  };\n\n  AppView.prototype.unSetLoading = function() {\n    this.$el.find(\"button\").toggleClass(\"btn-default\");\n    return this.$el.find(\"button\").toggleClass(\"btn-warning\");\n  };\n\n  return AppView;\n\n})(View);\n","var CitiesView, CityView, ViewCollection,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nViewCollection = require('../lib/view_collection');\n\nCityView = require('./city_view');\n\nmodule.exports = CitiesView = (function(superClass) {\n  extend(CitiesView, superClass);\n\n  function CitiesView() {\n    return CitiesView.__super__.constructor.apply(this, arguments);\n  }\n\n  CitiesView.prototype.el = \"#cities\";\n\n  CitiesView.prototype.itemview = CityView;\n\n  return CitiesView;\n\n})(ViewCollection);\n","var CityView, View,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nView = require(\"../lib/base_view\");\n\nmodule.exports = CityView = (function(superClass) {\n  extend(CityView, superClass);\n\n  function CityView() {\n    return CityView.__super__.constructor.apply(this, arguments);\n  }\n\n  CityView.prototype.className = \"city\";\n\n  CityView.prototype.tagName = \"li\";\n\n  CityView.prototype.events = {\n    \"click .remove\": \"deleteCity\"\n  };\n\n  CityView.prototype.template = function() {\n    var template;\n    template = require(\"./templates/city\");\n    return template(this.getRenderData());\n  };\n\n  CityView.prototype.deleteCity = function() {\n    return this.model.destroy({\n      success: (function(_this) {\n        return function() {\n          return _this.remove();\n        };\n      })(this),\n      error: (function(_this) {\n        return function() {\n          return alertUser(\"impossible to remove \" + _this.model.get(\"name\"));\n        };\n      })(this)\n    });\n  };\n\n  return CityView;\n\n})(View);\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"content\"><div id=\"add\"><div id=\"add-head\"><h1 class=\"row\">Cozy <strong>Weather</strong> Forecast</h1><h5 class=\"row\">Welcome to your weather app, <strong>type the name of a city</strong></h5><form class=\"row\"><div class=\"input-group col-xs-offset-4 col-xs-4\"><input placeholder=\"Paris, fr\" class=\"form-control\"/><div class=\"input-group-addon\"><span class=\"glyphicon glyphicon-search\"></span></div></div><p class=\"help-block\">Tip: To ensure the location, add the country code after the city name (for ex: Paris, fr)</p></form></div><div id=\"add-choices\"><p class=\"row\">Or click to add to your cozy forecast</p><div id=\"add-choices-examples\"></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","var AppRouter, AppView, CitiesView, City, CityCollection, View,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nView = require(\"../lib/base_view\");\n\nAppRouter = require(\"../routers/app_router\");\n\nCitiesView = require(\"./cities_view\");\n\nCity = require(\"../models/city\");\n\nCityCollection = require(\"../collections/city_collection\");\n\nmodule.exports = AppView = (function(superClass) {\n  extend(AppView, superClass);\n\n  function AppView() {\n    return AppView.__super__.constructor.apply(this, arguments);\n  }\n\n  AppView.prototype.el = \"body.widget\";\n\n  AppView.prototype.template = function() {\n    return require(\"./templates/widget\");\n  };\n\n  AppView.prototype.initialize = function() {\n    return this.router = PiourCozyOWM.Routers.AppRouter = new AppRouter();\n  };\n\n  AppView.prototype.afterRender = function() {\n    this.citiesView = new CitiesView({\n      collection: new CityCollection\n    });\n    return this.citiesView.collection.fetch({\n      error: (function(_this) {\n        return function() {\n          return alertUser(\"impossible to retrieve weather informations\");\n        };\n      })(this)\n    });\n  };\n\n  AppView.prototype.events = {\n    \"click\": function() {\n      var intent;\n      intent = {\n        action: 'goto',\n        params: \"piour-owm/\"\n      };\n      return window.parent.postMessage(intent, window.location.origin);\n    }\n  };\n\n  return AppView;\n\n})(View);\n"]}