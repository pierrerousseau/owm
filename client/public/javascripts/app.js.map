{"version":3,"file":"public/javascripts/app.js","sources":["app/collections/city_collection.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/view_collection.coffee","app/models/city.coffee","app/routers/app_router.coffee","app/views/app_view.coffee","app/views/cities_view.coffee","app/views/city_view.coffee","app/views/templates/city.jade","app/views/templates/home.jade","app/views/templates/random.jade"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzGA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjMA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1IA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7DA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1EA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;;A","sourcesContent":["var City, CityCollection,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nCity = require('../models/city');\n\nmodule.exports = CityCollection = (function(superClass) {\n  extend(CityCollection, superClass);\n\n  CityCollection.prototype.model = City;\n\n  CityCollection.prototype.url = 'cities';\n\n  function CityCollection(view) {\n    this.view = view;\n    CityCollection.__super__.constructor.apply(this, arguments);\n  }\n\n  return CityCollection;\n\n})(Backbone.Collection);\n","if (this.PiourCozyOWM == null) {\n  this.PiourCozyOWM = {};\n}\n\nif (PiourCozyOWM.Routers == null) {\n  PiourCozyOWM.Routers = {};\n}\n\nif (PiourCozyOWM.Views == null) {\n  PiourCozyOWM.Views = {};\n}\n\nif (PiourCozyOWM.Models == null) {\n  PiourCozyOWM.Models = {};\n}\n\nif (PiourCozyOWM.Collections == null) {\n  PiourCozyOWM.Collections = {};\n}\n\n$(function() {\n  var AppView;\n  require('../lib/app_helpers');\n  if (window.location.href.match(\"widget.html\")) {\n    PiourCozyOWM.Views.appView = new (AppView = require('views/widget_view'));\n    PiourCozyOWM.Views.appView.render();\n  } else {\n    PiourCozyOWM.Views.appView = new (AppView = require('views/app_view'));\n    PiourCozyOWM.Views.appView.render();\n  }\n  return Backbone.history.start({\n    pushState: true\n  });\n});\n","(function() {\n  return (function() {\n    var console, dummy, method, methods, results;\n    console = window.console = window.console || {};\n    method = void 0;\n    dummy = function() {};\n    methods = 'assert,count,debug,dir,dirxml,error,exception, group,groupCollapsed,groupEnd,info,log,markTimeline, profile,profileEnd,time,timeEnd,trace,warn'.split(',');\n    results = [];\n    while (method = methods.pop()) {\n      results.push(console[method] = console[method] || dummy);\n    }\n    return results;\n  })();\n})();\n","var BaseView,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nmodule.exports = BaseView = (function(superClass) {\n  extend(BaseView, superClass);\n\n  function BaseView() {\n    return BaseView.__super__.constructor.apply(this, arguments);\n  }\n\n  BaseView.prototype.template = function() {};\n\n  BaseView.prototype.initialize = function() {};\n\n  BaseView.prototype.getRenderData = function() {\n    var ref;\n    return {\n      model: (ref = this.model) != null ? ref.toJSON() : void 0\n    };\n  };\n\n  BaseView.prototype.render = function() {\n    this.beforeRender();\n    this.$el.html(this.template(this.getRenderData()));\n    this.afterRender();\n    return this;\n  };\n\n  BaseView.prototype.beforeRender = function() {};\n\n  BaseView.prototype.afterRender = function() {};\n\n  BaseView.prototype.destroy = function() {\n    this.undelegateEvents();\n    this.$el.removeData().unbind();\n    this.remove();\n    return Backbone.View.prototype.remove.call(this);\n  };\n\n  return BaseView;\n\n})(Backbone.View);\n","var BaseView, ViewCollection,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nBaseView = require('lib/base_view');\n\nmodule.exports = ViewCollection = (function(superClass) {\n  extend(ViewCollection, superClass);\n\n  function ViewCollection() {\n    this.removeItem = bind(this.removeItem, this);\n    this.addItem = bind(this.addItem, this);\n    return ViewCollection.__super__.constructor.apply(this, arguments);\n  }\n\n  ViewCollection.prototype.itemview = null;\n\n  ViewCollection.prototype.views = {};\n\n  ViewCollection.prototype.template = function() {\n    return '';\n  };\n\n  ViewCollection.prototype.itemViewOptions = function() {};\n\n  ViewCollection.prototype.collectionEl = null;\n\n  ViewCollection.prototype.onChange = function() {\n    return this.$el.toggleClass('empty', _.size(this.views) === 0);\n  };\n\n  ViewCollection.prototype.appendView = function(view) {\n    return this.$collectionEl.prepend(view.el);\n  };\n\n  ViewCollection.prototype.initialize = function() {\n    ViewCollection.__super__.initialize.apply(this, arguments);\n    this.views = {};\n    this.listenTo(this.collection, \"reset\", this.onReset);\n    this.listenTo(this.collection, \"add\", this.addItem);\n    this.listenTo(this.collection, \"remove\", this.removeItem);\n    if (this.collectionEl == null) {\n      this.collectionEl = this.el;\n      return this.$collectionEl = $(this.collectionEl);\n    }\n  };\n\n  ViewCollection.prototype.render = function() {\n    var id, ref, view;\n    ref = this.views;\n    for (id in ref) {\n      view = ref[id];\n      view.$el.detach();\n    }\n    return ViewCollection.__super__.render.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.afterRender = function() {\n    var id, ref, view;\n    this.$collectionEl = $(this.collectionEl);\n    ref = this.views;\n    for (id in ref) {\n      view = ref[id];\n      this.appendView(view.$el);\n    }\n    this.onReset(this.collection);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.remove = function() {\n    this.onReset([]);\n    return ViewCollection.__super__.remove.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.onReset = function(newcollection) {\n    var id, ref, view;\n    ref = this.views;\n    for (id in ref) {\n      view = ref[id];\n      view.remove();\n    }\n    return newcollection.forEach(this.addItem);\n  };\n\n  ViewCollection.prototype.addItem = function(model) {\n    var options, view;\n    options = _.extend({}, {\n      model: model\n    }, this.itemViewOptions(model));\n    view = new this.itemview(options);\n    this.views[model.cid] = view.render();\n    this.appendView(view);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.removeItem = function(model) {\n    this.views[model.cid].remove();\n    delete this.views[model.cid];\n    return this.onChange(this.views);\n  };\n\n  return ViewCollection;\n\n})(BaseView);\n","var City, dayNames, icons, nbNextDays, nbNextHours,\n  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nicons = {\n  \"01d\": \"day-sunny\",\n  \"01n\": \"night-clear\",\n  \"02d\": \"day-cloudy\",\n  \"02n\": \"night-cloudy\",\n  \"03d\": \"cloud\",\n  \"03n\": \"cloud\",\n  \"04d\": \"cloudy\",\n  \"04n\": \"cloudy\",\n  \"09d\": \"rain\",\n  \"09d\": \"night-rain\",\n  \"10d\": \"day-rain-hail\",\n  \"10d\": \"night-hail\",\n  \"11d\": \"lightning\",\n  \"11n\": \"lightning\",\n  \"13d\": \"snow\",\n  \"13n\": \"snow\",\n  \"50d\": \"windy\",\n  \"50n\": \"windy\"\n};\n\ndayNames = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n\nnbNextHours = 5;\n\nnbNextDays = 6;\n\nmodule.exports = City = (function(superClass) {\n  extend(City, superClass);\n\n  function City() {\n    this.fmtCityDaysForecastInfos = bind(this.fmtCityDaysForecastInfos, this);\n    this.fmtCityForecastInfos = bind(this.fmtCityForecastInfos, this);\n    this.fmtCityWeatherInfos = bind(this.fmtCityWeatherInfos, this);\n    return City.__super__.constructor.apply(this, arguments);\n  }\n\n  City.prototype.urlRoot = 'cities';\n\n  City.prototype.initialize = function() {\n    this.fmtCityWeatherInfos();\n    this.fmtCityForecastInfos();\n    return this.fmtCityDaysForecastInfos();\n  };\n\n  City.prototype.toRoundCelcius = function(value) {\n    return parseInt(value - 273.15);\n  };\n\n  City.prototype.toWiClass = function(icon) {\n    return icons[icon];\n  };\n\n  City.prototype.toHotness = function(temp) {\n    var hotness;\n    hotness = \"normal\";\n    if (temp != null) {\n      temp = parseInt(temp);\n      if (temp > 26) {\n        hotness = \"hot\";\n      }\n      if (temp < 9) {\n        hotness = \"cold\";\n      }\n    }\n    return hotness;\n  };\n\n  City.prototype.fmtCityWeatherInfos = function() {\n    var clouds, icon, main, main_weather, name, sys, toSet, weather;\n    toSet = {};\n    weather = this.get(\"weather\");\n    if (weather) {\n      main = weather.main;\n      toSet.temp = 0;\n      toSet.humidity = 0;\n      if (main) {\n        toSet.temp = this.toRoundCelcius(main.temp);\n        toSet.humidity = main.humidity;\n      }\n      main_weather = weather.weather;\n      if (main_weather) {\n        toSet.weather = main_weather[0];\n      }\n      clouds = weather.clouds;\n      if (clouds) {\n        toSet.clouds = clouds.all;\n      }\n      sys = weather.sys;\n      toSet.country = \"\";\n      if (sys) {\n        toSet.country = sys.country.toLowerCase();\n      }\n      name = weather.name;\n      if (name) {\n        toSet.name = name;\n      }\n      toSet.wiclass = \"lightning\";\n      if (toSet.weather != null) {\n        icon = toSet.weather.icon;\n        if (icon != null) {\n          toSet.wiclass = this.toWiClass(icon);\n        }\n      } else {\n        toSet.weather = {\n          \"icon\": \"11d\"\n        };\n      }\n      toSet.hotness = this.toHotness(toSet.temp);\n    }\n    return this.set(toSet);\n  };\n\n  City.prototype.toReadableHour = function(value) {\n    return value.split(\" \")[1].slice(0, nbNextHours);\n  };\n\n  City.prototype.toReadableDate = function(value) {\n    var date;\n    date = new Date(0);\n    date.setUTCSeconds(value);\n    return \"\" + date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear();\n  };\n\n  City.prototype.toDayName = function(value) {\n    var date;\n    date = new Date(0);\n    date.setUTCSeconds(value);\n    return dayNames[date.getDay()];\n  };\n\n  City.prototype.fmtCityForecastInfos = function() {\n    var forecast, hour, i, len, nextHour, nexts, now;\n    nexts = [];\n    forecast = this.get(\"hours\");\n    if (forecast) {\n      forecast = forecast.list;\n      now = new Date().getTime();\n      if (forecast) {\n        for (i = 0, len = forecast.length; i < len; i++) {\n          hour = forecast[i];\n          if (hour.dt * 1000 >= now) {\n            nextHour = {};\n            nextHour.hour = this.toReadableHour(hour.dt_txt);\n            nextHour.temp = this.toRoundCelcius(hour.main.temp);\n            nextHour.humidity = hour.main.humidity;\n            nextHour.weather = hour.weather[0];\n            nextHour.wiclass = this.toWiClass(nextHour.weather.icon);\n            nextHour.hotness = this.toHotness(nextHour.temp);\n            nexts.push(nextHour);\n          }\n          if (nexts.length >= nbNextHours) {\n            break;\n          }\n        }\n      }\n    }\n    return this.set(\"hours\", nexts);\n  };\n\n  City.prototype.fmtCityDaysForecastInfos = function() {\n    var day, forecast, i, len, nextDay, nexts;\n    nexts = [];\n    forecast = this.get(\"days\");\n    if (forecast) {\n      forecast = forecast.list;\n      if (forecast) {\n        for (i = 0, len = forecast.length; i < len; i++) {\n          day = forecast[i];\n          nextDay = {};\n          nextDay.date = this.toReadableDate(day.dt);\n          nextDay.name = this.toDayName(day.dt);\n          nextDay.day = this.toRoundCelcius(day.temp.day);\n          nextDay.night = this.toRoundCelcius(day.temp.night);\n          nextDay.humidity = day.humidity;\n          nextDay.weather = day.weather[0];\n          nextDay.wiclass = this.toWiClass(nextDay.weather.icon);\n          nextDay.hotness = this.toHotness(nextDay.day);\n          nexts.push(nextDay);\n        }\n      }\n    }\n    return this.set(\"days\", nexts);\n  };\n\n  return City;\n\n})(Backbone.Model);\n","var AppRouter,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nmodule.exports = AppRouter = (function(superClass) {\n  extend(AppRouter, superClass);\n\n  function AppRouter() {\n    return AppRouter.__super__.constructor.apply(this, arguments);\n  }\n\n  AppRouter.prototype.routes = {\n    '': function() {}\n  };\n\n  return AppRouter;\n\n})(Backbone.Router);\n","var AppRouter, AppView, CitiesView, City, CityCollection, View, capitals,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nView = require(\"../lib/base_view\");\n\nAppRouter = require(\"../routers/app_router\");\n\nCitiesView = require(\"./cities_view\");\n\nCity = require(\"../models/city\");\n\nCityCollection = require('../collections/city_collection');\n\ncapitals = [\"Beijing\", \"Tokyo\", \"Moscow\", \"Korea\", \"Jakarta\", \"Tehran\", \"Mexico\", \"Lima\", \"Bangkok\", \"London\", \"Bogotá\", \"Cairo\", \"Baghdad\", \"Hong Kong\", \"Dhaka\", \"Singapore\", \"Ankara\", \"Santiago\", \"Riyadh\", \"Kinshasa\", \"Berlin\", \"Damascus\", \"Hanoi\", \"Madrid\", \"Pyongyang\", \"Kabul\", \"Addis Ababa\", \"Buenos Aires\", \"Rome\", \"Kiev\", \"Nairobi\", \"Brasília\", \"Taipei\", \"Amman\", \"Luanda\", \"Pretoria\", \"Paris\", \"Tashkent\", \"Stockholm\", \"Havana\", \"Phnom Penh\", \"Bucharest\", \"Baku\", \"Caracas\", \"Rabat\", \"Vienna\", \"Khartoum\", \"Budapest\", \"Warsaw\", \"Minsk\", \"Manila\", \"Kampala\", \"Accra\", \"Yaoundé\", \"Antananarivo\", \"Beirut\", \"Algiers\", \"Quito\", \"Harare\", \"Doha\", \"Sana'a Conakry\", \"Kuala Lumpur\", \"Montevideo\", \"Lusaka\", \"Hargeisa\", \"Bamako\", \"Prague\", \"Port-au-Prince\", \"Tripoli\", \"Kuwait City\", \"Belgrade\", \"Santo Domingo\", \"Mogadishu\", \"Sofia\", \"Brazzaville\", \"Brussels\", \"Yerevan\", \"Maputo\", \"Freetown\", \"Tbilisi\", \"Dakar\", \"Ouagadougou\", \"Dublin\", \"Monrovia\", \"Guatemala City\", \"Islamabad\", \"Managua\", \"Naypyidaw\", \"Ulan Bator\", \"Lilongwe\", \"Ottawa\", \"La Paz\", \"Bishkek\", \"Lomé\", \"Panama City\", \"Kathmandu\", \"Amsterdam\", \"Zagreb\", \"Muscat\", \"Niamey\", \"Chişinău\", \"Jerusalem\", \"Abuja\", \"Tirana\", \"Tunis\", \"Ashgabat\", \"N'Djamena\", \"Tegucigalpa\", \"Bangui\", \"Athens\", \"Nouakchott\", \"Kigali\", \"Riga\", \"Kingston\", \"Astana\", \"Oslo\", \"Helsinki\", \"Abu Dhabi\", \"Dushanbe\", \"Vilnius\", \"Libreville\", \"Asmara\", \"Lisbon\", \"San Salvador\", \"Asunción\", \"Macau\", \"Skopje\", \"Copenhagen\", \"Djibouti\", \"Yamoussoukro\", \"Bissau\", \"Bratislava\", \"San Juan\", \"Tallinn\", \"Bujumbura\", \"Sarajevo\", \"Wellington\", \"Juba\", \"Canberra\", \"San José\", \"Port Moresby\", \"Vientiane\", \"Dodoma\", \"Maseru\", \"Nicosia\", \"Ljubljana\", \"Paramaribo\", \"Windhoek\", \"New Delhi\", \"Nassau\", \"Gaborone\", \"Porto-Novo\", \"Prishtina\", \"El Aaiún\", \"Tiraspol\", \"Port Louis\", \"Podgorica\", \"Manama\", \"Georgetown\", \"Praia\", \"Berne\", \"Sri Jayawardenapura Kotte\", \"Reykjavík\", \"Bridgetown\", \"Malé\", \"Thimphu\", \"Malabo\", \"Nouméa\", \"Suva\", \"Mbabane\", \"Luxembourg\", \"Castries\", \"Saipan\", \"Moroni\", \"Honiara\", \"Dili\", \"Sao Tome\", \"Pago Pago\", \"Stepanakert\", \"Willemstad\", \"Kingstown\", \"Apia\", \"Port Vila\", \"Monaco\", \"Banjul\", \"Tarawa\", \"Oranjestad\", \"Victoria\", \"Gibraltar\", \"Saint Helier\", \"George Town\", \"Douglas\", \"Papeete\", \"Ramallah\", \"Majuro\", \"Andorra\", \"St. John's\", \"Peter Port\", \"Belmopan\", \"Nuuk\", \"Roseau\", \"Basseterre\", \"Mariehamn\", \"Charlotte Amalie\", \"Palikir\", \"Road Town\", \"St. George's\", \"Valletta\", \"Marigot\", \"Saint-Pierre\", \"Avarua\", \"Vaduz\", \"San Marino\", \"Funafuti\", \"Cockburn Town\", \"Gustavia\", \"Stanley\", \"Longyearbyen\", \"Philipsburg\", \"Mata-Utu\", \"Hamilton\"];\n\nmodule.exports = AppView = (function(superClass) {\n  extend(AppView, superClass);\n\n  function AppView() {\n    return AppView.__super__.constructor.apply(this, arguments);\n  }\n\n  AppView.prototype.el = \"body.application\";\n\n  AppView.prototype.template = function() {\n    return require(\"./templates/home\");\n  };\n\n  AppView.prototype.initialize = function() {\n    return this.router = PiourCozyOWM.Routers.AppRouter = new AppRouter();\n  };\n\n  AppView.prototype.afterRender = function() {\n    this.citiesView = new CitiesView({\n      collection: new CityCollection\n    });\n    return this.loadCities();\n  };\n\n  AppView.prototype.events = {\n    \"submit #search\": \"cityFind\",\n    \"click #refresh\": \"refresh\",\n    \"click .random-choice\": \"addRandomCity\"\n  };\n\n  AppView.prototype.displayRandom = function() {\n    var i, len, name, num, ref, results;\n    $(\".random-choice\").remove();\n    ref = [1, 2, 3];\n    results = [];\n    for (i = 0, len = ref.length; i < len; i++) {\n      num = ref[i];\n      name = capitals[Math.floor(Math.random() * capitals.length)];\n      results.push($.getJSON(\"cities/\" + name, function(data) {\n        var newCity, tmpl;\n        tmpl = require(\"./templates/random\");\n        newCity = $(tmpl(new City(data).attributes));\n        newCity.hide();\n        $(\"#random-choices\").append(newCity);\n        return newCity.show(\"slow\");\n      }));\n    }\n    return results;\n  };\n\n  AppView.prototype.loadCities = function() {\n    this.displayRandom();\n    this.setLoading();\n    return this.citiesView.collection.fetch({\n      reset: true,\n      success: (function(_this) {\n        return function() {\n          return _this.unSetLoading();\n        };\n      })(this),\n      error: (function(_this) {\n        return function() {\n          _this.unSetLoading();\n          return alert(\"impossible to retrieve weather informations\");\n        };\n      })(this)\n    });\n  };\n\n  AppView.prototype.addCity = function(name) {\n    var cityObj;\n    this.setLoading();\n    cityObj = {\n      \"name\": name\n    };\n    return this.citiesView.collection.create(cityObj, {\n      \"wait\": true,\n      \"success\": (function(_this) {\n        return function() {\n          return _this.unSetLoading();\n        };\n      })(this),\n      \"error\": (function(_this) {\n        return function() {\n          _this.unSetLoading();\n          return alert(\"impossible to add weather informations for \" + name);\n        };\n      })(this)\n    });\n  };\n\n  AppView.prototype.cityFind = function(evt) {\n    var city;\n    city = this.$el.find(\"input.city\");\n    this.addCity(city.val());\n    return false;\n  };\n\n  AppView.prototype.refresh = function(evt) {\n    this.loadCities();\n    return false;\n  };\n\n  AppView.prototype.addRandomCity = function(evt) {\n    var current, name;\n    current = $(evt.currentTarget);\n    name = current.find(\".random-choice-name\").text();\n    this.addCity(name);\n    return false;\n  };\n\n  AppView.prototype.setLoading = function() {\n    return $(\"body\").addClass(\"loading\");\n  };\n\n  AppView.prototype.unSetLoading = function() {\n    return $(\"body\").removeClass(\"loading\");\n  };\n\n  return AppView;\n\n})(View);\n","var CitiesView, CityView, ViewCollection,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nViewCollection = require('../lib/view_collection');\n\nCityView = require('./city_view');\n\nmodule.exports = CitiesView = (function(superClass) {\n  extend(CitiesView, superClass);\n\n  function CitiesView() {\n    return CitiesView.__super__.constructor.apply(this, arguments);\n  }\n\n  CitiesView.prototype.el = \"#cities\";\n\n  CitiesView.prototype.itemview = CityView;\n\n  return CitiesView;\n\n})(ViewCollection);\n","var CityView, View,\n  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  hasProp = {}.hasOwnProperty;\n\nView = require(\"../lib/base_view\");\n\nmodule.exports = CityView = (function(superClass) {\n  extend(CityView, superClass);\n\n  function CityView() {\n    return CityView.__super__.constructor.apply(this, arguments);\n  }\n\n  CityView.prototype.className = \"city row\";\n\n  CityView.prototype.tagName = \"li\";\n\n  CityView.prototype.events = {\n    \"click .now-remove\": \"removeCity\"\n  };\n\n  CityView.prototype.template = function() {\n    var data, template;\n    template = require(\"./templates/city\");\n    data = this.getRenderData().model;\n    if (data) {\n      if (!data.hotness) {\n        this.model.initialize();\n        data = this.getRenderData().model;\n      }\n      return template(data);\n    }\n  };\n\n  CityView.prototype.removeCity = function() {\n    this.fromClick = true;\n    return this.model.destroy({\n      error: (function(_this) {\n        return function() {\n          return alert(\"impossible to remove \" + _this.model.get(\"name\"));\n        };\n      })(this)\n    });\n  };\n\n  CityView.prototype.remove = function() {\n    var el;\n    el = this.$el;\n    if (this.fromClick) {\n      el.hide(\"slow\", function() {\n        return el.remove();\n      });\n      return this.fromClick = false;\n    } else {\n      return el.remove();\n    }\n  };\n\n  return CityView;\n\n})(View);\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div');\nbuf.push(attrs({ \"class\": ('now') + ' ' + (\"col-lg-offset-1 col-lg-3 weather-\" + (weather.icon) + \" temp-\" + (hotness) + \"\") }, {\"class\":true}));\nbuf.push('><div class=\"now-title\"><div');\nbuf.push(attrs({ 'title':(\"\" + (country) + \"\"), \"class\": ('now-name') }, {\"title\":true}));\nbuf.push('>' + escape((interp = name) == null ? '' : interp) + '</div><div class=\"now-description\">' + escape((interp = weather.description) == null ? '' : interp) + '</div><div title=\"remove\" class=\"now-remove\"><img src=\"icons/remove.svg\" alt=\"remove\"/></div></div><div class=\"now-weather\"><span');\nbuf.push(attrs({ \"class\": (\"wi wi-\" + (wiclass) + \"\") }, {\"class\":true}));\nbuf.push('></span></div><div class=\"now-infos\"><div class=\"now-temp\">' + escape((interp = temp) == null ? '' : interp) + '°</div><div class=\"now-humidity\"> <img src=\"icons/humidity.svg\" alt=\"humidity\"/> ' + escape((interp = humidity) == null ? '' : interp) + '%</div></div></div><div class=\"today col-lg-2\">');\n// iterate hours\n;(function(){\n  if ('number' == typeof hours.length) {\n\n    for (var index = 0, $$l = hours.length; index < $$l; index++) {\n      var time = hours[index];\n\nbuf.push('<div');\nbuf.push(attrs({ \"class\": ('time') + ' ' + (\"weather-\" + (time.weather.icon) + \" temp-\" + (time.hotness) + \" index-\" + (index) + \"\") }, {\"class\":true}));\nbuf.push('><div class=\"time-hour\">' + escape((interp = time.hour) == null ? '' : interp) + '</div><div class=\"time-weather\"><span');\nbuf.push(attrs({ \"class\": (\"wi wi-\" + (time.wiclass) + \"\") }, {\"class\":true}));\nbuf.push('></span></div><strong class=\"time-temp\">' + escape((interp = time.temp) == null ? '' : interp) + '°</strong><div class=\"time-humidity\">' + escape((interp = time.humidity) == null ? '' : interp) + '%</div></div>');\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in hours) {\n      $$l++;      var time = hours[index];\n\nbuf.push('<div');\nbuf.push(attrs({ \"class\": ('time') + ' ' + (\"weather-\" + (time.weather.icon) + \" temp-\" + (time.hotness) + \" index-\" + (index) + \"\") }, {\"class\":true}));\nbuf.push('><div class=\"time-hour\">' + escape((interp = time.hour) == null ? '' : interp) + '</div><div class=\"time-weather\"><span');\nbuf.push(attrs({ \"class\": (\"wi wi-\" + (time.wiclass) + \"\") }, {\"class\":true}));\nbuf.push('></span></div><strong class=\"time-temp\">' + escape((interp = time.temp) == null ? '' : interp) + '°</strong><div class=\"time-humidity\">' + escape((interp = time.humidity) == null ? '' : interp) + '%</div></div>');\n    }\n\n  }\n}).call(this);\n\nbuf.push('</div><div class=\"week col-lg-6\"><div class=\"days row\">');\n// iterate days\n;(function(){\n  if ('number' == typeof days.length) {\n\n    for (var index = 0, $$l = days.length; index < $$l; index++) {\n      var day = days[index];\n\nbuf.push('<div');\nbuf.push(attrs({ \"class\": ('day') + ' ' + (\"col-lg-2 weather-\" + (day.weather.icon) + \" temp-\" + (day.hotness) + \" index-\" + (index) + \"\") }, {\"class\":true}));\nbuf.push('><div class=\"day-name\">' + escape((interp = day.name) == null ? '' : interp) + '</div><div class=\"day-date\">' + escape((interp = day.date) == null ? '' : interp) + '</div><div class=\"day-weather\"><span');\nbuf.push(attrs({ \"class\": (\"wi wi-\" + (day.wiclass) + \"\") }, {\"class\":true}));\nbuf.push('></span></div><div class=\"day-description\">' + escape((interp = day.weather.description) == null ? '' : interp) + '</div><div title=temperature during night=\"title=temperature during night\" class=\"day-temp\">' + escape((interp = day.night) == null ? '' : interp) + '°</div><strong title=temperature during day=\"title=temperature during day\" class=\"day-temp\">' + escape((interp = day.day) == null ? '' : interp) + '°</strong></div>');\n    }\n\n  } else {\n    var $$l = 0;\n    for (var index in days) {\n      $$l++;      var day = days[index];\n\nbuf.push('<div');\nbuf.push(attrs({ \"class\": ('day') + ' ' + (\"col-lg-2 weather-\" + (day.weather.icon) + \" temp-\" + (day.hotness) + \" index-\" + (index) + \"\") }, {\"class\":true}));\nbuf.push('><div class=\"day-name\">' + escape((interp = day.name) == null ? '' : interp) + '</div><div class=\"day-date\">' + escape((interp = day.date) == null ? '' : interp) + '</div><div class=\"day-weather\"><span');\nbuf.push(attrs({ \"class\": (\"wi wi-\" + (day.wiclass) + \"\") }, {\"class\":true}));\nbuf.push('></span></div><div class=\"day-description\">' + escape((interp = day.weather.description) == null ? '' : interp) + '</div><div title=temperature during night=\"title=temperature during night\" class=\"day-temp\">' + escape((interp = day.night) == null ? '' : interp) + '°</div><strong title=temperature during day=\"title=temperature during day\" class=\"day-temp\">' + escape((interp = day.day) == null ? '' : interp) + '°</strong></div>');\n    }\n\n  }\n}).call(this);\n\nbuf.push('</div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"content\"><div id=\"add-head\"><div class=\"row\"><div class=\"left col-xs-2\"><img src=\"images/sun-cloud.svg\"/></div><h1 class=\"col-xs-4\">Cozy <strong>Weather </strong>Forecast<img id=\"refresh\" src=\"icons/refresh.svg\"/></h1><div class=\"right col-xs-2\"><img src=\"images/cloud.svg\"/></div><form id=\"search\" class=\"col-xs-3\"><label><strong>Add a new city </strong>to your forecast</label><div class=\"input-group\"><input placeholder=\"Paris, fr\" class=\"city form-control\"/><div class=\"input-group-addon\"><img src=\"icons/search.svg\" alt=\"search\"/></div></div><p class=\"help-block\">Tip: To ensure the location, add the country code after the city name (for ex: Paris, fr)</p></form></div></div><div id=\"loader\" class=\"loader-inner ball-pulse\"><div></div><div></div><div></div><p>Loading weather, please wait ...</p></div><ul id=\"cities\"></ul><div id=\"random\"><p class=\"row\">Click to add to your cozy forecast ...</p><div id=\"random-choices\" class=\"row\"><div class=\"col-xs-3\"></div></div></div><div id=\"footer\"> \\ndata from <a href=\"https://openweathermap.org\" target=\"_blank\">OpenWeatherMap </a>-\\nicons from <a href=\"https://erikflowers.github.io/weather-icons/\" target=\"_blank\">Erik Flowers</a></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div');\nbuf.push(attrs({ \"class\": ('random-choice') + ' ' + (\"col-xs-2 weather-\" + (weather.icon) + \" temp-\" + (hotness) + \"\") }, {\"class\":true}));\nbuf.push('><div');\nbuf.push(attrs({ 'title':(\"\" + (country) + \"\"), \"class\": ('random-choice-name') }, {\"title\":true}));\nbuf.push('>' + escape((interp = name) == null ? '' : interp) + '</div><div class=\"random-choice-weather\"><span');\nbuf.push(attrs({ \"class\": (\"wi wi-\" + (wiclass) + \"\") }, {\"class\":true}));\nbuf.push('></span></div><div class=\"random-choice-infos\"><div class=\"random-choice-temp\">' + escape((interp = temp) == null ? '' : interp) + '°</div><div class=\"random-choice-humidity\"> <img src=\"icons/humidity.svg\" alt=\"humidity\"/> ' + escape((interp = humidity) == null ? '' : interp) + '%</div></div></div>');\n}\nreturn buf.join(\"\");\n};"]}